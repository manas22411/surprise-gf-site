<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For you ‚ù§Ô∏è</title>
  <style>
    :root{
      --bg1:#fff6f8;
      --bg2:#ffe6ec;
      --card:#ffffffcc;
      --cardSolid:#fff;
      --text:#2b1f22;
      --muted:#5b4a4e;
      --accent:#ff4d7d;
      --accent2:#ff9ab2;
      --accent3:#ffd6e2;
      --shadow: 0 18px 50px rgba(255, 77, 125, 0.16);
      --shadow2: 0 10px 28px rgba(0,0,0,0.08);
      --grad: linear-gradient(135deg, var(--bg2) 0%, var(--bg1) 40%, #ffffff 100%);
      --btnGrad: linear-gradient(90deg, var(--accent) 0%, var(--accent2) 100%);
      --ring: 0 0 0 4px rgba(255, 77, 125, 0.18);
      --radius: 22px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: var(--grad);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 24px 14px;
      overflow-x:hidden;
    }

    /* Soft animated background blobs */
    .bg{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }
    .blob{
      position:absolute;
      width: 420px;
      height: 420px;
      background: radial-gradient(circle at 30% 30%, #fff 0%, var(--accent3) 35%, transparent 70%);
      opacity:0.7;
      filter: blur(2px);
      animation: drift 10s ease-in-out infinite alternate;
    }
    .blob.b1{ left:-120px; top:-120px; animation-duration: 11s; }
    .blob.b2{ right:-160px; bottom:-140px; animation-duration: 13s; opacity:0.6; }
    @keyframes drift{
      from{ transform: translate(0,0) scale(1); }
      to{ transform: translate(40px,30px) scale(1.08); }
    }

    /* Floating heart particles */
    .hearts{
      position:absolute;
      inset:0;
      overflow:hidden;
      z-index:0;
      pointer-events:none;
      mask-image: radial-gradient(circle at center, black 60%, transparent 100%);
    }
    .hearts span{
      position:absolute;
      font-size: 22px;
      opacity:0.16;
      animation: floatUp 8s linear infinite;
      filter: drop-shadow(0 6px 10px rgba(255,77,125,0.10));
    }
    @keyframes floatUp{
      0% { transform: translateY(40px) scale(1); opacity: 0; }
      10%{ opacity:0.18; }
      60%{ opacity:0.22; }
      100% { transform: translateY(-140px) scale(1.2); opacity: 0; }
    }

    .wrap{
      width: min(980px, 94vw);
      position:relative;
      z-index:1;
    }

    .card{
      background: var(--card);
      border: 1px solid rgba(255, 154, 178, 0.35);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 34px 28px 22px;
      text-align:center;
      position:relative;
      overflow:hidden;
      animation: popIn 800ms cubic-bezier(.2,.9,.2,1);
    }
    @keyframes popIn{
      from{ opacity:0; transform: translateY(10px) scale(0.98); }
      to{ opacity:1; transform: translateY(0) scale(1); }
    }

    .title{
      margin: 0 0 10px;
      font-size: clamp(1.6rem, 4vw, 2.35rem);
      color: var(--accent);
      letter-spacing: 0.01em;
      text-shadow: 0 10px 30px rgba(255,77,125,0.18);
    }
    .lead{
      margin: 8px auto 18px;
      max-width: 720px;
      font-size: clamp(1.02rem, 2.2vw, 1.12rem);
      color: var(--muted);
      line-height:1.55;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 14px;
      border-radius: 999px;
      background: rgba(255, 214, 226, 0.55);
      border: 1px solid rgba(255, 154, 178, 0.4);
      color: #7a3e4d;
      font-weight: 650;
      font-size: 0.98rem;
      margin: 0 0 18px;
    }

    .primary-actions{
      display:flex;
      justify-content:center;
      gap: 12px;
      flex-wrap:wrap;
      margin: 6px 0 8px;
    }

    .btn{
      border: none;
      cursor: pointer;
      font-weight: 750;
      border-radius: 999px;
      padding: 12px 20px;
      font-size: 1rem;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
      box-shadow: 0 10px 20px rgba(255,77,125,0.14);
      user-select:none;
    }
    .btn:focus{ outline:none; box-shadow: var(--shadow2), var(--ring); }
    .btn:hover{ transform: translateY(-1px) scale(1.02); }
    .btn:active{ transform: translateY(0) scale(0.99); }

    .btn-primary{
      background: var(--btnGrad);
      color: #fff;
    }
    .btn-ghost{
      background: #fff;
      color: var(--accent);
      border: 1.5px solid rgba(255, 154, 178, 0.65);
      box-shadow: 0 10px 18px rgba(0,0,0,0.06);
    }

    .apology{
      margin-top: 18px;
      background: rgba(255, 214, 226, 0.35);
      border: 1px solid rgba(255, 154, 178, 0.45);
      border-radius: 18px;
      padding: 18px 16px 16px;
      box-shadow: 0 14px 30px rgba(255,77,125,0.08);
      text-align:center;
    }
    .apology h2{
      margin: 0 0 6px;
      color: var(--accent);
      font-size: 1.25rem;
      letter-spacing:0.01em;
    }
    .apology p{
      margin: 8px auto 0;
      max-width: 760px;
      color:#4d3a3f;
      line-height:1.55;
      font-size: 1.05rem;
    }

    .tiny{
      margin: 12px 0 0;
      color:#a44a60;
      font-weight:650;
      font-size: 1rem;
    }

    .choices{
      margin-top: 14px;
      display:flex;
      gap: 12px;
      justify-content:center;
      position:relative;
      min-height: 56px;
      padding: 8px 6px;
    }

    /* Full-screen apology message modal */
    .overlay{
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 22px 14px;
      background: rgba(255, 77, 125, 0.12);
      backdrop-filter: blur(6px);
      z-index: 200;
    }
    .overlay.show{ display:flex; }

    .dialog{
      width: min(820px, 92vw);
      background: linear-gradient(120deg, #fff 0%, #fff6f8 60%, #ffe6ec 100%);
      border-radius: 20px;
      border: 1px solid rgba(255,154,178,0.45);
      box-shadow: 0 25px 80px rgba(255,77,125,0.22);
      padding: 26px 22px 18px;
      transform: translateY(8px) scale(0.98);
      opacity:0;
      animation: dialogIn 520ms cubic-bezier(.2,.9,.2,1) forwards;
      position:relative;
      text-align:center;
    }
    @keyframes dialogIn{
      to{ transform: translateY(0) scale(1); opacity:1; }
    }
    .dialog .close{
      position:absolute;
      right: 14px;
      top: 12px;
      border:none;
      background: transparent;
      font-size: 1.7rem;
      color: var(--accent);
      cursor:pointer;
      font-weight:900;
      line-height:1;
      padding: 6px 10px;
      border-radius: 12px;
    }
    .dialog .close:hover{ background: rgba(255,214,226,0.55); }

    .dialog .msg{
      font-size: 1.12rem;
      line-height: 1.6;
      color: #2b1f22;
      margin: 10px auto 0;
      max-width: 720px;
      font-weight: 560;
    }
    .dialog .actions{
      display:flex;
      gap: 12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 16px;
    }

    /* Big romantic animation overlay */
    .romance{
      position: fixed;
      inset:0;
      pointer-events:none;
      z-index: 150;
      display:none;
    }
    .romance.show{ display:block; animation: fadeIn 320ms ease; }
    @keyframes fadeIn{ from{opacity:0;} to{opacity:1;} }

    .big-heart{
      position:absolute;
      left:50%;
      top:44%;
      transform: translate(-50%,-50%);
      font-size: clamp(4.8rem, 9vw, 7.2rem);
      color: var(--accent);
      text-shadow: 0 0 60px rgba(255,154,178,0.65), 0 0 120px rgba(255,246,248,0.95);
      opacity:0.95;
      animation: pulse 1.8s ease-in-out infinite;
    }
    @keyframes pulse{
      0%{ transform: translate(-50%,-50%) scale(1); }
      50%{ transform: translate(-50%,-50%) scale(1.18); }
      100%{ transform: translate(-50%,-50%) scale(1); }
    }
    .sparkle{
      position:absolute;
      font-size: 2.1rem;
      opacity:0.8;
      animation: twinkle 1.9s linear infinite;
      filter: drop-shadow(0 8px 18px rgba(255,77,125,0.18));
    }
    @keyframes twinkle{
      0%{ transform: scale(1) rotate(0deg); opacity:0.65; }
      50%{ transform: scale(1.22) rotate(18deg); opacity:1; }
      100%{ transform: scale(1) rotate(0deg); opacity:0.65; }
    }

    /* Photo modal */
    .photoOverlay{
      position: fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 22px 14px;
      background: rgba(255, 77, 125, 0.14);
      backdrop-filter: blur(6px);
      z-index: 300;
    }
    .photoOverlay.show{ display:flex; }

    .photoCard{
      width:min(520px, 92vw);
      background: #fff;
      border-radius: 20px;
      border: 1px solid rgba(255,154,178,0.45);
      box-shadow: 0 25px 80px rgba(255,77,125,0.25);
      padding: 18px;
      position:relative;
      text-align:center;
      transform: translateY(10px) scale(0.98);
      opacity:0;
      animation: dialogIn 420ms cubic-bezier(.2,.9,.2,1) forwards;
    }
    .photoCard img{
      width:100%;
      max-height: 62vh;
      object-fit: cover;
      border-radius: 14px;
      box-shadow: 0 14px 26px rgba(0,0,0,0.12);
    }
    .photoCard .caption{
      margin-top: 12px;
      font-size: 1.18rem;
      font-weight: 800;
      color: var(--accent);
    }
    .photoCard .close{
      position:absolute;
      right: 10px;
      top: 10px;
      border:none;
      background: rgba(255,214,226,0.55);
      color: var(--accent);
      font-size: 1.4rem;
      font-weight: 900;
      cursor:pointer;
      width: 42px;
      height: 42px;
      border-radius: 14px;
      display:grid;
      place-items:center;
    }
    .photoCard .close:hover{ background: rgba(255,214,226,0.8); }

    .signature{
      margin-top: 14px;
      color: var(--accent);
      font-weight: 800;
      letter-spacing:0.01em;
      font-size: 1.05rem;
    }

    .footer{
      margin-top: 16px;
      color: #7b6a6d;
      font-size: 0.9rem;
    }

    @media (max-width: 520px){
      .card{ padding: 22px 16px 16px; }
      .choices{ min-height: 92px; }
    }
  </style>
</head>
<body>
  <div class="bg">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
    <!-- Animated background images -->
    <div class="bg-photo" id="bgPhoto1" style="background-image:url('images/onmyback.jpeg');"></div>
    <div class="bg-photo" id="bgPhoto2" style="background-image:url('images/kurta.jpeg');"></div>
    <div class="bg-sorry-text">I am sorry</div>
  </div>
  <style>
    .bg-photo {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background-size: cover;
      background-position: center;
      opacity: 0.13;
      z-index: 0;
      animation: bgPhotoAnim 12s infinite alternate;
      pointer-events: none;
    }
    #bgPhoto1 {
      animation-delay: 0s;
    }
    #bgPhoto2 {
      animation-delay: 6s;
    }
    @keyframes bgPhotoAnim {
      0% { opacity: 0.13; filter: blur(2px) brightness(1.1); transform: scale(1) translateY(0); }
      50% { opacity: 0.19; filter: blur(0.5px) brightness(1.18); transform: scale(1.04) translateY(-12px); }
      100% { opacity: 0.13; filter: blur(2px) brightness(1.1); transform: scale(1) translateY(0); }
    }
    .bg-sorry-text {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2.8rem;
      color: #ff4d7d;
      font-weight: 900;
      opacity: 0.22;
      z-index: 1;
      pointer-events: none;
      text-shadow: 0 2px 24px #fff6f8, 0 0 32px #ff4d7d;
      letter-spacing: 0.04em;
      font-family: inherit;
      user-select: none;
    }
  </style>

  <!-- Big romantic overlay (optional visual) -->
  <div id="romance" class="romance" aria-hidden="true">
    <div class="big-heart">‚ù§Ô∏è</div>
    <div class="sparkle" style="left:46%;top:36%;animation-delay:0.1s">‚ú®</div>
    <div class="sparkle" style="left:56%;top:46%;animation-delay:0.5s">‚ú®</div>
    <div class="sparkle" style="left:50%;top:58%;animation-delay:0.9s">‚ú®</div>
    <div class="sparkle" style="left:60%;top:38%;animation-delay:1.2s">‚ú®</div>
    <div class="sparkle" style="left:40%;top:48%;animation-delay:1.6s">‚ú®</div>
  </div>

  <!-- Extra romance image modal -->
  <div id="romanceImageModal" class="photoOverlay" role="dialog" aria-modal="true" aria-label="Romantic Photo" style="z-index:400;">
    <div class="photoCard" style="max-width:520px;">
      <button class="close" id="closeRomanceImageModal" aria-label="Close" style="z-index:2; position:absolute; right:10px; top:10px; pointer-events:auto; background:rgba(255,214,226,0.55); color:var(--accent); font-size:1.4rem; font-weight:900; cursor:pointer; width:42px; height:42px; border-radius:14px; display:grid; place-items:center; border:none;">&times;</button>
      <img src="images/more_romantic.jpeg" alt="Romantic moment" style="width:100%; max-height:62vh; object-fit:cover; border-radius:14px; box-shadow:0 14px 26px rgba(0,0,0,0.12);">
      <div class="caption">A beautiful memory together üíñ</div>
    </div>
  </div>

  <main class="wrap">
    <section class="card">
      <div class="hearts" aria-hidden="true">
        <span style="left:8%; top:75%; animation-delay:0s;">‚ù§Ô∏è</span>
        <span style="left:22%; top:85%; animation-delay:1.2s;">üíñ</span>
        <span style="left:48%; top:78%; animation-delay:2.1s;">üíï</span>
        <span style="left:70%; top:88%; animation-delay:3.0s;">üíó</span>
        <span style="left:84%; top:80%; animation-delay:4.1s;">üíû</span>
      </div>

      <h1 class="title">Hey, beautiful ‚ù§Ô∏è</h1>
      <div class="pill">A tiny surprise, made with love ‚ú®</div>
      <p class="lead">
        I made this little page just for you ‚Äî something soft, simple, and honest.
        I hope it brings a small smile‚Ä¶ even in a hard time.
      </p>

      <div class="primary-actions">
        <button class="btn btn-primary" id="openPhotoBtn" type="button">Open this üíù</button>
        <button class="btn btn-ghost" id="toggleRomanceBtn" type="button">Extra romance ‚ú®</button>
      </div>

      <section class="apology" aria-labelledby="apology-heading">
        <h2 id="apology-heading">Please, I am sorry</h2>
        <p>
          I‚Äôm sorry for the mistakes I made and for the times I hurt you.
          I never meant to cause you pain.
          <br />
          I want a fresh start with you ‚Äî and I still choose us.
        </p>

        <p class="tiny">(Try to click Reject ‚Äî it‚Äôs shy üòâ)</p>

        <div class="choices" id="choiceArea">
          <button id="acceptBtn" class="btn btn-primary" type="button">Accept Apologies & continue</button>
          <button id="rejectBtn" class="btn btn-ghost" type="button" aria-label="Reject">Reject</button>
        </div>
      </section>

      <div class="signature">‚Äî From Gudoo</div>
      <div class="footer">Made with ‚ù§Ô∏è</div>
    </section>
  </main>

  <!-- Apology message overlay -->
  <div id="apologyOverlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="apologyTitle">
    <div class="dialog">
      <button class="close" id="closeApologyOverlay" aria-label="Close">&times;</button>
      <h2 id="apologyTitle" style="margin:0;color:var(--accent);font-size:1.35rem;">For you ‚ù§Ô∏è</h2>
      <p class="msg">
        I know I‚Äôve made mistakes, and I‚Äôm truly sorry. If everything had been okay, we‚Äôd be celebrating 7 years together ‚Äî
        but I still want to celebrate us, even a little. Because even in this difficult phase, we‚Äôre still holding on and
        trying to fix things. I want a new beginning with you. I love you, and I want us to move forward together.
      </p>

      <div class="actions">
        <button id="celebrateBtn" class="btn btn-primary" type="button">Celebrate üéâ</button>
        <button id="rejectMsgBtn" class="btn btn-ghost" type="button">Reject</button>
      </div>

      <p class="tiny" style="margin-top:14px;">(Try to click Reject ‚Äî it's still shy üòâ)</p>
    </div>
  </div>

  <!-- Photo modal -->
  <div id="photoModal" class="photoOverlay" role="dialog" aria-modal="true" aria-label="Photo">
    <div class="photoCard">
      <button class="close" id="closePhotoModal" aria-label="Close">&times;</button>
      <img src="images/pic1-maar.jpeg" alt="Photo" />
      <div class="caption">I love you üíñ</div>
    </div>
  </div>

  <!-- Video modal -->
  <div id="videoModal" class="photoOverlay" role="dialog" aria-modal="true" aria-label="Video" style="z-index:350;">
    <div class="photoCard" style="max-width:640px; position:relative;">
      <button class="close" id="closeVideoModal" aria-label="Close" style="z-index:2; position:absolute; right:10px; top:10px; pointer-events:auto; background:rgba(255,214,226,0.55); color:var(--accent); font-size:1.4rem; font-weight:900; cursor:pointer; width:42px; height:42px; border-radius:14px; display:grid; place-items:center; border:none;">&times;</button>
      <video id="celebrateVideo" width="100%" controls style="border-radius:14px;box-shadow:0 14px 26px rgba(0,0,0,0.12);max-height:62vh;background:#000; margin-top:48px;">
        <source src="video/maar_video.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <div class="caption">A special moment for us üé•</div>
    </div>
  </div>

  <script>
    // ---------- Helpers ----------
    function setBodyScrollLocked(locked){
      document.body.style.overflow = locked ? "hidden" : "";
    }

    function smallConfettiBurst(xPercent = 50, yPercent = 40) {
      for (let i = 0; i < 22; i++) {
        const s = document.createElement('div');
        s.style.position = 'fixed';
        s.style.left = (xPercent + Math.random() * 14 - 7) + '%';
        s.style.top  = (yPercent + Math.random() * 14 - 7) + '%';
        s.style.width = '8px';
        s.style.height = '8px';
        s.style.borderRadius = '2px';
        s.style.background = ['#ff4d7d', '#ffd166', '#9be7ff', '#b8f2e6'][Math.floor(Math.random() * 4)];
        s.style.opacity = '0.95';
        s.style.transform = 'translate(-50%,-50%) rotate(' + (Math.random() * 360) + 'deg)';
        s.style.transition = 'transform 900ms cubic-bezier(.2,.8,.2,1), opacity 900ms';
        s.style.zIndex = 9999;
        document.body.appendChild(s);

        requestAnimationFrame(() => {
          s.style.transform =
            'translate(' + ((Math.random() - 0.5) * 180) + 'px,' +
            (-240 - Math.random() * 220) + 'px) rotate(' + (Math.random() * 720) + 'deg)';
          s.style.opacity = '0';
        });

        setTimeout(() => s.remove(), 1200 + Math.random() * 350);
      }
    }

    // ---------- DOM ----------
    const acceptBtn = document.getElementById('acceptBtn');
    const rejectBtn = document.getElementById('rejectBtn');
    const choiceArea = document.getElementById('choiceArea');

    const apologyOverlay = document.getElementById('apologyOverlay');
    const closeApologyOverlay = document.getElementById('closeApologyOverlay');
    const celebrateBtn = document.getElementById('celebrateBtn');
    const rejectMsgBtn = document.getElementById('rejectMsgBtn');


  const openPhotoBtn = document.getElementById('openPhotoBtn');
  const photoModal = document.getElementById('photoModal');
  const closePhotoModal = document.getElementById('closePhotoModal');

  // Video modal elements
  const videoModal = document.getElementById('videoModal');
  const closeVideoModal = document.getElementById('closeVideoModal');
  const celebrateVideo = document.getElementById('celebrateVideo');

    const romance = document.getElementById('romance');
    const toggleRomanceBtn = document.getElementById('toggleRomanceBtn');

    // ---------- Apology flow ----------
    acceptBtn.addEventListener('click', () => {
      smallConfettiBurst(50, 42);
      setTimeout(() => {
        apologyOverlay.classList.add('show');
        setBodyScrollLocked(true);
      }, 250);
    });

    function moveRejectWithin(areaEl, btnEl){
      const areaRect = areaEl.getBoundingClientRect();
      const btnRect = btnEl.getBoundingClientRect();
      const padding = 6;

      // Compute max allowed left/top within area
      const maxX = Math.max(0, areaRect.width - btnRect.width - padding * 2);
      const maxY = Math.max(0, areaRect.height - btnRect.height - padding * 2);

      const x = Math.floor(Math.random() * maxX) + padding;
      const y = Math.floor(Math.random() * maxY) + padding;

      btnEl.style.position = 'absolute';
      btnEl.style.left = x + 'px';
      btnEl.style.top  = y + 'px';
    }

    // Make reject "shy" (only dodge if cursor is close)
    document.addEventListener('mousemove', (e) => {
      const r = rejectBtn.getBoundingClientRect();
      const buffer = 90;
      const dx = e.clientX - (r.left + r.width / 2);
      const dy = e.clientY - (r.top + r.height / 2);
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < buffer) {
        // ensure choiceArea is positioning context
        choiceArea.style.position = 'relative';
        moveRejectWithin(choiceArea, rejectBtn);
      }
    });

    // If clicked, transform & celebrate
    rejectBtn.addEventListener('click', (e) => {
      e.preventDefault();
      rejectBtn.disabled = true;
      rejectBtn.textContent = 'Accepted üíó';
      rejectBtn.classList.remove('btn-ghost');
      rejectBtn.classList.add('btn-primary');
      smallConfettiBurst(50, 42);
      setTimeout(() => {
        apologyOverlay.classList.add('show');
        setBodyScrollLocked(true);
      }, 250);
    });

    // Close apology overlay
    function closeApology(){
      apologyOverlay.classList.remove('show');
      setBodyScrollLocked(false);
    }
    closeApologyOverlay.addEventListener('click', closeApology);
    apologyOverlay.addEventListener('click', (e) => {
      if (e.target === apologyOverlay) closeApology();
    });

    // Celebrate inside overlay
    celebrateBtn.addEventListener('click', () => {
      smallConfettiBurst(50, 38);
      // Show video modal and play video
      videoModal.classList.add('show');
      setBodyScrollLocked(true);
      if (celebrateVideo) {
        celebrateVideo.currentTime = 0;
        celebrateVideo.play();
      }
    });
    // Video modal close logic
    function closeVideo() {
      videoModal.classList.remove('show');
      setBodyScrollLocked(false);
      if (celebrateVideo) {
        celebrateVideo.pause();
        celebrateVideo.currentTime = 0;
      }
    }
    closeVideoModal.addEventListener('click', closeVideo);
    videoModal.addEventListener('click', (e) => {
      if (e.target === videoModal) closeVideo();
    });

    // Shy reject in overlay
    if (rejectMsgBtn) {
      function moveRejectMsgRandomly(){
        const parent = rejectMsgBtn.parentElement; // .actions
        parent.style.position = 'relative';
        const areaRect = parent.getBoundingClientRect();
        const btnRect = rejectMsgBtn.getBoundingClientRect();
        const padding = 6;

        const maxX = Math.max(0, areaRect.width - btnRect.width - padding*2);
        const x = Math.floor(Math.random() * maxX) + padding;

        rejectMsgBtn.style.position = 'relative';
        rejectMsgBtn.style.left = x + 'px';
        rejectMsgBtn.style.top = '0px';
      }

      document.addEventListener('mousemove', (e) => {
        if (!apologyOverlay.classList.contains('show')) return;
        const r = rejectMsgBtn.getBoundingClientRect();
        const buffer = 90;
        const dx = e.clientX - (r.left + r.width / 2);
        const dy = e.clientY - (r.top + r.height / 2);
        const dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < buffer) moveRejectMsgRandomly();
      });

      rejectMsgBtn.addEventListener('click', (e) => {
        e.preventDefault();
        rejectMsgBtn.disabled = true;
        rejectMsgBtn.textContent = 'Celebrate üéâ';
        rejectMsgBtn.classList.remove('btn-ghost');
        rejectMsgBtn.classList.add('btn-primary');
        smallConfettiBurst(50, 38);
      });
    }

    // ---------- Photo modal ----------
    function openPhoto(){
      photoModal.classList.add('show');
      setBodyScrollLocked(true);
    }
    function closePhoto(){
      photoModal.classList.remove('show');
      setBodyScrollLocked(false);
    }

    openPhotoBtn.addEventListener('click', (e) => {
      e.preventDefault();
      openPhoto();
    });

    closePhotoModal.addEventListener('click', closePhoto);

    photoModal.addEventListener('click', (e) => {
      if (e.target === photoModal) closePhoto();
    });

    // ---------- Extra romance toggle ----------
    const romanceImageModal = document.getElementById('romanceImageModal');
    const closeRomanceImageModal = document.getElementById('closeRomanceImageModal');

    toggleRomanceBtn.addEventListener('click', () => {
      romanceImageModal.classList.add('show');
      setBodyScrollLocked(true);
    });

    function closeRomanceImage() {
      romanceImageModal.classList.remove('show');
      setBodyScrollLocked(false);
    }
    closeRomanceImageModal.addEventListener('click', closeRomanceImage);
    romanceImageModal.addEventListener('click', (e) => {
      if (e.target === romanceImageModal) closeRomanceImage();
    });

    // ---------- ESC to close modals ----------
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (photoModal.classList.contains('show')) closePhoto();
        if (apologyOverlay.classList.contains('show')) closeApology();
        if (videoModal.classList.contains('show')) closeVideo();
        if (romanceImageModal.classList.contains('show')) closeRomanceImage();
      }
    });
  </script>
</body>
</html>


